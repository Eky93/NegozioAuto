<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Auto in vendita</title>
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <style>
        img{
            display: none;
            max-width: 500px;
        }

        #result{
            font-size: x-large;
            font-weight: bold;
        }

        #ricerca{
            background-color: lightseagreen;
            text-align: center;
        }

        #risultatoricerca{
            display: flex;
            flex-direction: column;
            background-color:gray;
            text-align: center;
        }

        body{
            display: flex;
            flex-direction: row;
        }

        #container{
            text-align: center;
            border-width: 3px;
            border-color: black;
            border-radius: 10%;
            max-width: 2000px;
            margin: 20px auto 20px auto;
        }


    </style>
    <script>

        let prezzo = 0;

        function scegli(){
            let scelta = document.getElementById("auto").value;
            let categ = document.getElementById("categ").value;
            
            //imposto i prezzi per i vari modelli
            if (scelta == "Duster"){
                prezzo = 24000;
            } else if (scelta == "Niro"){
                prezzo = 31000;
            } else if (scelta == "Tucson"){
                prezzo = 40000;
            } else if (scelta == "Urus"){
                prezzo = 245000;
            } else if (scelta == "Cayenne"){
                prezzo = 115000;
            }

            //calcolo il prezzo in base alla categoria
            if (categ == "usato"){
                prezzo = prezzo - (prezzo*35/100);
            } else if (categ == "usatogar"){
                prezzo = prezzo - (prezzo*25/100);
            } else if (categ == "km0"){
                prezzo = prezzo - (prezzo*10/100);
            }

            //mostro la foto dell'auto in base alla scelta dell'utente
            if (scelta == "Duster"){
                document.getElementById("Duster").style.display="block";
                document.getElementById("Niro").style.display="none";
                document.getElementById("Tucson").style.display="none";
                document.getElementById("Urus").style.display="none";
                document.getElementById("Cayenne").style.display="none";
                let nodo = document.getElementById("result");
                nodo.textContent = "Il prezzo della Dacia Duster è " + prezzo + " €";
                document.getElementById("risultatoricerca").style.backgroundColor="rosybrown";
            } else if (scelta == "Niro"){
                document.getElementById("Duster").style.display="none";
                document.getElementById("Niro").style.display="block";
                document.getElementById("Tucson").style.display="none";
                document.getElementById("Urus").style.display="none";
                document.getElementById("Cayenne").style.display="none";
                let nodo = document.getElementById("result");
                nodo.textContent = "Il prezzo della Kia Niro è " + prezzo + " €";
                document.getElementById("risultatoricerca").style.backgroundColor="palevioletred";
            } else if (scelta == "Tucson"){
                document.getElementById("Duster").style.display="none";
                document.getElementById("Niro").style.display="none";
                document.getElementById("Tucson").style.display="block";
                document.getElementById("Urus").style.display="none";
                document.getElementById("Cayenne").style.display="none";
                let nodo = document.getElementById("result");
                nodo.textContent = "Il prezzo della Hyundai Tucson è " + prezzo + " €";
                document.getElementById("risultatoricerca").style.backgroundColor="orange";
            } else if (scelta == "Cayenne"){
                document.getElementById("Duster").style.display="none";
                document.getElementById("Niro").style.display="none";
                document.getElementById("Tucson").style.display="none";
                document.getElementById("Urus").style.display="none";
                document.getElementById("Cayenne").style.display="block";
                let nodo = document.getElementById("result");
                nodo.textContent = "Il prezzo della Porsche Cayenne è " + prezzo + " €";
                document.getElementById("risultatoricerca").style.backgroundColor="orangered";
            }else if (scelta == "Urus"){
                document.getElementById("Duster").style.display="none";
                document.getElementById("Niro").style.display="none";
                document.getElementById("Tucson").style.display="none";
                document.getElementById("Urus").style.display="block";
                document.getElementById("Cayenne").style.display="none";
                let nodo = document.getElementById("result");
                nodo.textContent = "Il prezzo della Lamborghini Urus è " + prezzo + " €";
                document.getElementById("risultatoricerca").style.backgroundColor="red";
            }
        }

        function calcolorata(){
            let numrate = document.getElementById("rate").value;
            let capital = prezzo; // Importo del prestito in euro
            let annualInterestRate = 3; // Tasso di interesse annuo in percentuale
            let loanTermMonths = numrate; // Durata del prestito in mesi

            // Converti il tasso di interesse annuo in tasso di interesse mensile
            let monthlyInterestRate = (annualInterestRate / 100) / 12;

            // Calcola la rata mensile utilizzando la formula
            let emi = capital * monthlyInterestRate * Math.pow((1 + monthlyInterestRate), loanTermMonths) / (Math.pow((1 + monthlyInterestRate), loanTermMonths) - 1);
            let rata = Math.round(emi);

            let nuovoNodo = document.createElement("h4");
            nuovoNodo.textContent = "La tua rata sarà di " + rata + "€ al mese";
            let nodo = document.getElementById("result");
            nodo.appendChild(nuovoNodo);

            let nuovoValore = rata * numrate;
            let nuovoNodo1 = document.createElement("h4");
            nuovoNodo1.textContent = "Con il finanziamento la tua auto costerà " + nuovoValore + "€";
            nodo.appendChild(nuovoNodo1);

        }

    </script>

</head>
<body>
    <div class="card text-center" style="width: 50rem;">
        <div class="card-header">
            <h1>Super Cars</h1>
        </div>
        
        <div id="ricerca"><h1>Auto in vendita</h1>
            <h4>Scegli la tua auto e scoprine il prezzo!</h4>
            <select id="auto">
                <option value="Duster">Dacia Duster</option>
                <option value="Niro">Kia Niro</option>
                <option value="Tucson">Hyundai Tucson</option>
                <option value="Cayenne">Porsche Cayenne</option>
                <option value="Urus">Lamborghini Urus</option>
                
            </select>
            <br>
            <br>
            <h4>Scegli la tipologia!</h4>
            <select id="categ">
                <option value="usato">Usato</option>
                <option value="usatogar">Usato garantito</option>
                <option value="km0">Km0</option>
                <option value="nuovo">Nuovo</option>
            </select>
            <br>
            <br>
            <button onclick="scegli()"">SCEGLI!</button>
            <br>
            <br>
        </div>
        <hr>
        <hr>
        <div id="risultatoricerca">
            <div id="result"></div>
            <br>

            <img src="duster.jpg" id="Duster">
            <img src="niro.jpg" id="Niro">
            <img src="tucson.jpg" id="Tucson">
            <img src="cayenne.jpg" id="Cayenne">
            <img src="urus.jpg" id="Urus"> 
            
            <h2>FINANZIAMENTO:</h2>
            <h4>Inserisci il numero di rate:</h4>
            <input type="number" id="rate">
            <button onclick="calcolorata()">Calcola rata</button>
            <br><br>
        </div>
    </div>
</body>
</html>